# **Servlet 过滤器/监听器**



## 过滤器

### xml配置过滤器

```xml
<!-- 配置过滤器 -->
<filter>
    <filter-name>helloFilter</filter-name>
    <!-- 自定义类实现Filter 接口 实现方法配置路径过滤 -->
    <filter-class>cn.wolfcode.web.filter.HelloFilter</filter-class> 
</filter>
<filter-mapping>
    <filter-name>helloFilter</filter-name>
    <!-- 需过滤的资源地址，即访问 /hello 会执行到过滤器 HelloFilter 的 doFilter 方法 -->
    <url-pattern>/hello</url-pattern>
</filter-mapping>
```

```txt
3、过滤路径 

过滤器的 url-pattern 是指 Filter 对哪一些资源做过滤操作。注意与 Servlet 区别：

            Servlet 中的 url-pattern 的作用：为当前 Servlet 起一个资源名称，外界通过该名字找到对应的
            Servlet 对象。
            Filter 中的 url-pattern 的作用：指定对哪些资源做过滤。
            
配置过滤器路径举例说明：

            /hello        ：说明当前 Filter 只会对 /hello 做拦截/过滤。
            /employee     ：说明当前 Filter 只会对 /employee 资源做过滤。
            /system/*     ：说明当前 Filter 只会对以 /system/ 作为前缀的资源路径做拦截。
            /*            ：说明当前 Filter 会对所有的资源访问都会被拦截。

Filter 的生命周期：

            指 Filter 从创建到销毁的整个过程。过程如下：
            对象的创建：在启动服务器的时候创建所有的 Filter 对象。
            init 方法的执行：在启动服务器的时候调用 Filter 对象中的 init 方法。
            doFilter 方法的执行：每次请求对应的资源的时候都会执行，只要路径符合。
            destroy 方法的执行：正常关闭服务器的时候，执行销毁操作，非正常关闭不会执行。

	创建对象（一次）---> init 方法（一次）---> doFilter 方法（N 次）---> destroy 方法(一次/ 0 次)

	重点:
        由在 web.xml 中配置的 <filter-mapping> 的先后顺序来决定。
        注解配置时则是由 Filter 的名称的字母先后顺序来决定。

```

### 注解配置过滤器

```java
// 注解配置,就一个注解 和 自定义过滤类 实现Filter就行了 
@WebFilter(filterName="自定义名称",urlPatterns="/*")
```





## 监听器



```txt
监听的对象：作用域对象，作用域属性。
监听的动作：作用域对象的创建和销毁，作用域属值的增删改。

监听器分类
    按作用域对象：
        ServletRequestListener
        HttpSessionListener
        ServletContextListener
    按作用域属性分：
        ServletRequestAttributeListener
        HttpSessionAttributeListener
        ServletContextAttributeListener
2、开发监听器的步骤 
    创建一个类，根据需求实现对应的接口。
	实现其中的方法。
        将监听器交给 Tomcat 管理。
```

### XML配置监听器

```xml
<listener>
    <listener-class>自定义监听类的全限定类名</listener-class>
</listener>
```

### 注解配置监听器

```java
// 只需自定义类实现相应的 Listener 类 并贴该注解即可
@WebListener
```

